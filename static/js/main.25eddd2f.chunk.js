(this.webpackJsonpdaglava2=this.webpackJsonpdaglava2||[]).push([[0],{100:function(e,n,t){},151:function(e,n,t){},217:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(13),c=t.n(o),i=(t(100),t(18)),l=t.n(i),s=t(26),u=t(8),m=t(10),d=t(38),h=t(37),p=t(6),f=function e(){Object(u.a)(this,e)};f.Home="/:component?",f.Component="/:component",f.Module="/module/:module",f.GraphModule="/:component/module/:module",f.GraphScope="/:component/scope/:scope",f.GraphNode="/:component/node/:node",f.GraphClosure="/:component/closure/:key",f.SubComponent="/:component/:subcomponent",f.SearchNode="/search/:nodeName",f.Tree="/:component/tree/:key";var g=function e(){Object(u.a)(this,e)};g.Home="/",g.Component=function(e){return"/".concat(encodeURIComponent(e))},g.Module=function(e){return"/module/".concat(encodeURIComponent(e))},g.GraphNode=function(e,n){return"/".concat(encodeURIComponent(e),"/node/").concat(encodeURIComponent(n))},g.GraphModule=function(e,n){return"/".concat(encodeURIComponent(e),"/module/").concat(encodeURIComponent(n))},g.GraphScope=function(e,n){return"/".concat(encodeURIComponent(e),"/scope/").concat(encodeURIComponent(n))},g.GraphClosure=function(e,n){return"/".concat(encodeURIComponent(e),"/closure/").concat(encodeURIComponent(n))},g.SubComponent=function(e,n){return"/".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(n))},g.SearchNode=function(e){return"/search/".concat(encodeURIComponent(e))},g.Tree=function(e,n){return"/".concat(encodeURIComponent(e),"/tree/").concat(encodeURIComponent(n))};var v=g,E=t(30),N=t(54),k={TITLE:N.title||"Graph Browser",REPO_URL:N.repo_url||"",PUBLIC_URL:"/dagger-browser",COMPONENTS_MANIFEST_JSON_URL:"/dagger-browser/ComponentsManifest.json"},y=function(e){var n=e.link;if(k.REPO_URL){var t=n.split(".").pop();return r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:k.REPO_URL+"/search?q=filename:"+t,className:"unselectable"},r.a.createElement("i",{className:"tiny material-icons"},"open_in_new"))}return r.a.createElement("span",null)},b=t(4),S=t.n(b),M=function(e){switch(e){case"INSTANCE":return{label:"I",color:"deep-purple"};case"PROVIDER":return{label:"P",color:"blue"};case"LAZY":return{label:"L",color:"indigo"};default:return}},C=function(e){var n=e.kind,t=M(n);return t?r.a.createElement("span",{className:S()("node-icon",t.color),title:n||""},t.label):r.a.createElement("span",null)},O=function(e){return e.value>e.largeThreshold?"red":e.value>e.smallThreshold?"orange":"green"},w=function(e){var n=e.weight;return n?r.a.createElement("span",null,n&&n.value>0&&r.a.createElement("span",{className:S()("unselectable","bubble",O(n)),title:n.summary},Number.isInteger(n.value)?n.value:n.value.toFixed(1)," ",n.unit?n.unit:"")):r.a.createElement("span",null)},I=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"displayNameForKey",value:function(e){for(var n="",t="",a=0;a<e.length;a++)if(" "!=e.charAt(a))n+=e.charAt(a);else{if(""==this.returnProcessedToken(n)){n="";continue}t+=this.returnProcessedToken(n)+" ",n=""}return t+=this.returnProcessedToken(n)}},{key:"returnProcessedToken",value:function(e){for(var n="",t=0;t<e.length;t++){var a=e.charAt(t);if("#"==a)break;if("@"==a||">"==a||","==a||"<"==a||"?"==a)n+=a,(t<e.length-1&&">"==a&&">"!=e.charAt(t+1)&&","!=e.charAt(t+1)&&" "!=e.charAt(t+1)||t<e.length-1&&","==a&&"?"!=e.charAt(t+1))&&(n+=" ");else if(a===a.toUpperCase()&&a.match(/[A-Z]/i)){for(n+=a,t++;t<e.length&&" "!=e.charAt(t)&&e.charAt(t).match(/[a-zA-Z0-9.()"_ -]/i);)n+=e.charAt(t),t++;t--}}return n}}]),e}(),j=(t(59),t(33)),U=t.n(j),_=t(34),T=t.n(_);var W=function(e){var n=e.node,t=e.onSelect,o=e.weight,c=void 0===o?void 0:o,i=e.scoped,l=void 0!==i&&i,s=e.kind,u=n.scope?"[".concat(n.scope.split(".").pop(),"]"):"",m=new I,d=r.a.useState(!1),h=Object(E.a)(d,2),p=h[0],f=h[1],g=function(){return Object(a.useEffect)((function(){var e=setTimeout((function(){return f(!1)}),5e3);return function(){return clearTimeout(e)}}),[]),r.a.createElement("div",{className:"copiedTextLink"},r.a.createElement("span",null,"Copied Component!"),r.a.createElement("br",null))};return r.a.createElement("div",{className:"tooltip_link"},r.a.createElement("div",{className:"binding"},r.a.createElement("div",null,r.a.createElement(C,{kind:s||n.kind}),l&&r.a.createElement("span",{className:"light-text"},u,"\xa0"),r.a.createElement("span",{onClick:function(){return t&&t(n.key)}},m.displayNameForKey(n.key.replace("java.util.","").replace("java.lang.","").replace("javax.inject.","").replace("io.reactivex.",""))),r.a.createElement("span",{className:"tooltiptext_link",onClick:function(){return T()(n.key)}},r.a.createElement("img",{src:U.a,height:12,width:12,onMouseLeave:function(){return f(!1)},onClick:function(){f(!0)}}),p&&r.a.createElement(g,null),"\xa0 ",n.key)),r.a.createElement("div",null,r.a.createElement(y,{link:n.key}),r.a.createElement(w,{weight:c}))))};var R=function(e){var n=e.subcomponentName,t=e.weight,a=e.onSelect;return r.a.createElement("div",null,r.a.createElement("div",{className:"binding",onClick:function(){return a&&a(n)}},r.a.createElement("div",{className:"text"},function(e){var n=e.lastIndexOf(".");return e.substring(n+1)}(n)),r.a.createElement("div",null,r.a.createElement(w,{weight:t}))))},x=t(7),D=function(e){var n=e.componentName,t=e.weight,a=void 0===t?void 0:t;return r.a.createElement("div",null,r.a.createElement("div",{className:"binding"},r.a.createElement("div",{className:"text"},r.a.createElement(x.b,{to:v.Component(n)},n)),r.a.createElement("div",null,r.a.createElement(y,{link:n}),r.a.createElement(w,{weight:a}))))},P=function(e){var n=e.graphManager,t=e.weightService,a=e.componentName,o=e.onSelect,c=n.getComponent(a),i=Object(p.f)(),l=c.nodes.filter((function(e){return!!e.scope})),s=new Set;c.nodes.filter((function(e){return void 0!=e.component&&e.component!==a})).forEach((function(e){return s.add(e.component)}));var u=c.nodes.filter((function(e){return"MEMBERS_INJECTION"===e.kind})),m=c.nodes[0].dependencies,d=c.nodes.filter((function(e){return"MULTIBOUND_SET"===e.kind||"MULTIBOUND_MAP"===e.kind}));return l.sort((function(e,n){var r=t.getWeight(a,e.key),o=t.getWeight(a,n.key);return(o?o.value:0)-(r?r.value:0)})),d.sort((function(e,n){var r=t.getWeight(a,e.key),o=t.getWeight(a,n.key);return(o?o.value:0)-(r?r.value:0)})),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},r.a.createElement(D,{componentName:a,weight:t.getWeight(a)})),m.length>0&&r.a.createElement("div",null,"Component Provisions:",m.map((function(e){return r.a.createElement(W,{key:e.key,scoped:!0,node:e,onSelect:function(e){return o(a,e)}})}))),u.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,"Members Injectors:"),u.map((function(e){return r.a.createElement(W,{key:e.key,weight:t.getWeight(a,e.key),scoped:!0,node:e,onSelect:function(e){return o(a,e)}})}))),s.size>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,s.size," Subcomponents:"),Array.from(s).map((function(e){return r.a.createElement(R,{subcomponentName:e,weight:n.getSubcomponentWeight(e),onSelect:function(n){return i.push(v.SubComponent(a,e))}})}))),d.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,d.length," Multibindings:"),d.map((function(e){return r.a.createElement(W,{key:e.key,weight:t.getWeight(a,e.key),scoped:!0,node:e,onSelect:function(e){return o(a,e)}})}))),l.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,l.length," Scoped Bindings:"),l.map((function(e){return r.a.createElement(W,{key:e.key,weight:t.getWeight(a,e.key),scoped:!0,node:e,onSelect:function(e){return o(a,e)}})})))))},G=t(87),L=t.n(G);var F=function(e){var n=e.graphManager,t=e.weightService,o=e.onSelect,c=e.componentName,i=Object(a.useState)(""),l=Object(E.a)(i,2),s=l[0],u=l[1],m=Object(a.useRef)(null),d=new I,h=Object(a.useState)(!1),p=Object(E.a)(h,2),f=p[0],g=p[1],v=Object(a.useMemo)((function(){return function(e,n,t){return e.getMatches("",t.trim().toLowerCase(),40,!1)}(n,0,s)}),[n,c,s]),N=function(e){if(e&&e.metaKey)return!1;m&&m.current&&m.current.input&&m.current.input.focus()},k=function(){return Object(a.useEffect)((function(){var e=setTimeout((function(){return g(!1)}),5e3);return function(){return clearTimeout(e)}}),[]),r.a.createElement("div",{className:"copiedTextAutosuggest"},r.a.createElement("span",null,"Copied Component"),r.a.createElement("br",null))};return Object(a.useEffect)((function(){return N(),window.addEventListener("keydown",N),function(){return window.removeEventListener("keydown",N)}}),[]),r.a.createElement("div",null,r.a.createElement(L.a,{ref:m,suggestions:v,onSuggestionsFetchRequested:function(){},onSuggestionsClearRequested:function(){return u("")},onSuggestionSelected:function(e,n){o(n.suggestion.componentName,n.suggestion.node.key)},getSuggestionValue:function(e){return e.node.key},renderSuggestion:function(e){return r.a.createElement("div",{className:"tooltip_suggest"},r.a.createElement("span",{className:"light-text"},e.componentName?"["+e.componentName.split(".").pop()+"] ":"",g(!1)),d.displayNameForKey(e.node.key),r.a.createElement("span",{className:"tooltiptext_suggest",onClick:function(){return T()(e.node.key)}},r.a.createElement("img",{src:U.a,height:12,width:12,onClick:function(){return g(!0)}})," \xa0",e.node.key),r.a.createElement(w,{weight:t.getWeight(e.componentName,e.node.key)}))},inputProps:{value:s,placeholder:"Find dependencies",onChange:function(e,n){u(n.newValue)}}}),f&&r.a.createElement(k,null))},A=function(e){var n=e.graphManager,t=e.weightServiceManager,a=n.componentSet.components,o=t.getWeightService();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Components"),a.map((function(e){return r.a.createElement(D,{componentName:e.name,weight:o.getWeight(e.name)})}))))},z=t(58),B=t(19),K=t(56),J=t.n(K),V=function(){function e(){Object(u.a)(this,e),this.manifestUrl=void 0,this.classInfoUrl=void 0,this.componentSet={components:[]},this.classInfo=void 0,this.nodeMap={},this.componentMap={},this.provisionsToExposingComponentsMap={},this.subcomponentWeights={},this.callsitesMap={}}return Object(m.a)(e,[{key:"loadUrl",value:function(){var e=Object(s.a)(l.a.mark((function e(n){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.substring(0,n.lastIndexOf("/")+1)+"ClassInfo.json",e.prev=1,e.next=4,J.a.get(t);case 4:a=e.sent,this.classInfo=a.data,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,e.next=13,J.a.get(n);case 13:r=e.sent,this.componentSet=r.data,this.populateCaches(),e.next=21;break;case 18:return e.prev=18,e.t1=e.catch(10),e.abrupt("return",!1);case 21:return this.manifestUrl=n,this.classInfoUrl=t,e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this,[[1,8],[10,18]])})));return function(n){return e.apply(this,arguments)}}()},{key:"loadFile",value:function(){var e=Object(s.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readFileAsync(n);case 2:return t=e.sent,this.componentSet=JSON.parse(t),this.populateCaches(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"readFileAsync",value:function(){var e=Object(s.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var a=new FileReader;a.onload=function(){e(a.result)},a.onerror=t,a.readAsText(n)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},{key:"getMatches",value:function(e,n,t,a){var r,o=e?[this.getComponent(e)]:this.componentSet.components,c=[],i=Object(B.a)(o);try{for(i.s();!(r=i.n()).done;){var l,s=r.value,u=Object(B.a)(s.nodes);try{for(u.s();!(l=u.n()).done;){var m=l.value;if(a?m.key.toLowerCase()==n.toLowerCase()&&c.push({node:m,componentName:s.name}):m.key.toLowerCase().includes(n.toLowerCase())&&c.push({node:m,componentName:s.name}),c.length>=t)return c}}catch(d){u.e(d)}finally{u.f()}}}catch(d){i.e(d)}finally{i.f()}return c}},{key:"getComponent",value:function(e){return this.componentMap[e]}},{key:"getNode",value:function(e,n){return this.nodeMap[e||""][n]}},{key:"getModule",value:function(e,n){var t=Object.values(this.nodeMap[e]).filter((function(e){return e.module===n}));return{key:n,bindings:t}}},{key:"getScope",value:function(e,n){var t=Object.values(this.nodeMap[e]).filter((function(e){return e.scope===n}));return{scope:n,bindings:t}}},{key:"getCallsites",value:function(e,n){var t=this;return(this.callsitesMap[e][n]||[]).map((function(a){var r=t.getNode(e,a.key);if(!r)return a;var o=r.dependencies.find((function(e){return e.key===n}));return o?Object(z.a)(Object(z.a)({},a),{},{kind:o.kind}):a}))}},{key:"getDependencyProviders",value:function(e){return this.provisionsToExposingComponentsMap[e]}},{key:"getSubcomponentWeight",value:function(e){return this.subcomponentWeights[e]}},{key:"getSubcomponentBindings",value:function(e,n){return Object.values(this.nodeMap[e]).filter((function(e){return e.component===n}))}},{key:"computeNodeWeight",value:function(e,n,t){var a=this.getNode(e,n);return a?this.computeWeightForNodes(e,[a],t):t.result()}},{key:"computeWeightForNodes",value:function(e,n,t){for(var a={};n.length;){var r=n.shift();if(r){t.reduce(r.key),a[r.key]=!0;var o,c=Object(B.a)(r.dependencies);try{for(c.s();!(o=c.n()).done;){var i=o.value;if(!a[i.key])if(this.shouldSkipWeight(e,i.key))a[i.key]=!0;else{t.reduce(i.key);var l=this.getNode(e,i.key);l&&n.push(l),a[i.key]=!0}}}catch(s){c.e(s)}finally{c.f()}}}return t.result()}},{key:"shouldSkipWeight",value:function(e,n){var t=this.getNode(e,n);return t&&"MEMBERS_INJECTION"===t.kind}},{key:"populateCaches",value:function(){var e=this;this.nodeMap[""]={},this.callsitesMap[""]={};var n,t=Object(B.a)(this.componentSet.components);try{for(t.s();!(n=t.n()).done;){var a=n.value;this.nodeMap[a.name]={},this.callsitesMap[a.name]={},this.componentMap[a.name]=a,a.nodes=a.nodes.filter((function(n){return!e.shouldSkipNode(n)}));var r,o=Object(B.a)(a.nodes);try{for(o.s();!(r=o.n()).done;){var c=r.value;if(c.key==a.name){var i,l=Object(B.a)(c.dependencies);try{for(l.s();!(i=l.n()).done;){var s=i.value,u=this.provisionsToExposingComponentsMap[s.key];u||(u=Array(),this.provisionsToExposingComponentsMap[s.key]=u),u.push(a.name)}}catch(f){l.e(f)}finally{l.f()}}if(this.nodeMap[a.name][c.key]=c,this.nodeMap[""][c.key]=c,c.component&&c.component!=a.name){var m=c.component;this.subcomponentWeights[m]||(this.subcomponentWeights[m]={value:0,smallThreshold:10,largeThreshold:500}),this.subcomponentWeights[m].value++}var d,h=Object(B.a)(c.dependencies);try{for(h.s();!(d=h.n()).done;){var p=d.value;this.callsitesMap[a.name][p.key]||(this.callsitesMap[a.name][p.key]=[]),this.callsitesMap[""][p.key]||(this.callsitesMap[""][p.key]=[]),this.callsitesMap[a.name][p.key].push(c),this.callsitesMap[""][p.key].push(c)}}catch(f){h.e(f)}finally{h.f()}}}catch(f){o.e(f)}finally{o.f()}}}catch(f){t.e(f)}finally{t.f()}}},{key:"shouldSkipNode",value:function(e){return"BOUND_INSTANCE"===e.kind}}]),e}();function H(e){var n=e.componentName,t=e.moduleName,a=e.graphManager,o=e.weightService,c=a.getModule(n,t),i=Object(p.f)();return c?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Module: ",c.key),r.a.createElement("h6",null,"Bindings"),c.bindings.map((function(e){return r.a.createElement(W,{key:e.key,weight:o.getWeight("",e.key),scoped:!0,node:e,onSelect:function(e){i.push(v.GraphNode(n,e))}})})))):r.a.createElement("div",null,"Cannot find $",c," module in $",n," graph")}var $=t(36);function q(e){var n=e.lastIndexOf(".");return-1===n?e:e.substring(n+1)}var Z=function(e){var n=e.componentName,t=e.graphs,a=e.selectGraph,o=t.map((function(e){return{value:e,label:q(e.toString())}})),c=n?{value:n,label:q(n)}:o[0];return r.a.createElement($.a,{value:c,className:"component-select",classNamePrefix:"react-select",onChange:function(e){return a(e.value)},placeholder:"Select graph...",options:o})};function Y(e){var n=e.graphManager,t=e.weightService,a=e.nodeName,o=function(e,n){var t=new I,a=(e=e.replace(/<|>|@|,/g," ")).split(" ").filter((function(e){return""!=e})),r=[],o=new Set;return a.forEach((function(e){n.getMatches("",e,40,!1).forEach((function(e){a.every((function(n){return t.displayNameForKey(e.node.key).includes(n)}))&&!o.has(e.node.key)&&r.length<5&&(r.push(e),o.add(e.node.key))}))})),r}(a,n);if(1==o.length)return Q({graphManager:n,weightService:t,componentName:o[0].componentName,nodeName:o[0].node.key,fullDetails:!0});if(o.length>1){if(function(e,n){var t=new I;if(1!=e.filter((function(e){return t.displayNameForKey(e.node.key)==n})).length)return!1;return!0}(o,a)){var c=new I,i=o.filter((function(e){return c.displayNameForKey(e.node.key)==a}));return Q({graphManager:n,weightService:t,componentName:i[0].componentName,nodeName:i[0].node.key,fullDetails:!0})}return r.a.createElement("div",null,o.map((function(e){return Q({graphManager:n,weightService:t,componentName:e.componentName,nodeName:e.node.key,fullDetails:!1})})))}return r.a.createElement("div",null,"Results for node name ",r.a.createElement("strong",null,r.a.createElement("i",null,a))," are not found in graph.")}function Q(e){var n=e.graphManager,t=e.weightService,a=e.componentName,o=e.nodeName,c=e.fullDetails,i=Object(p.f)(),l=new I,s=n.getNode(a,o);if(!s)return r.a.createElement("div",null,"Cannot find ",r.a.createElement("strong",null,o)," node in ",r.a.createElement("strong",null,a)," graph");var u=s.module,m=n.getMatches("",s.key,40,!0).map((function(e){return e.componentName})),d=n.getCallsites(a,s.key),h=function(e){switch(e){case"PROVISION":return"Module provision";case"INJECTION":return"@Inject constructor";case"DELEGATE":return"@Binds delegate";case"MEMBERS_INJECTION":return"Members Injector";case"COMPONENT":return"Component";case"COMPONENT_DEPENDENCY":return"Component Dependency";case"COMPONENT_PROVISION":return"Component Provision";case"COMPONENT_PRODUCTION":return"Component Production";case"BOUND_INSTANCE":return"Bound instance";case"MULTIBOUND_SET":return"Multibound Set";case"MULTIBOUND_MAP":return"Multibound Map";case"OPTIONAL":return"Optional";case"SUBCOMPONENT_CREATOR":return"Subcomponent Creator"}return e}(s.kind),f=a.substring(a.lastIndexOf(".")+1),g=s.scope&&s.scope.substring(s.scope.lastIndexOf(".")+1),E=function(e,n,t){if(!t.adjacentNodes)return"";var a,r=Object(B.a)(t.adjacentNodes);try{for(r.s();!(a=r.n()).done;){var o=a.value,c=e.getNode(n,o);if(c&&!c.kind&&o!=n)return o}}catch(i){r.e(i)}finally{r.f()}return""}(n,a,s),N=function(e,n,t){var a=e.getDependencyProviders(t.key);if(void 0!==a)return a.map((function(e){return r.a.createElement("div",null,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement(x.b,{className:"soft-link",to:v.Component(e)},e.substring(1+e.lastIndexOf("."))),"\xa0|\xa0",r.a.createElement(x.b,{className:"soft-link",to:v.GraphNode(e,t.key)},"Implementation"))}))}(n,0,s);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},r.a.createElement(W,{node:s,weight:t.getWeight(a,s.key),onSelect:function(){return i.push(v.GraphNode(a,s.key))}})),r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Component: "),1==m.length&&r.a.createElement(x.b,{className:"soft-link",to:v.Component(a)},f),m.length>1&&r.a.createElement(Z,{componentName:a,graphs:m,selectGraph:function(e){return i.push(v.GraphNode(e,s.key))}})),s.component&&a!==s.component&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Subcomponent: "),r.a.createElement(x.b,{className:"soft-link",to:v.SubComponent(a,s.component)},r.a.createElement("div",{className:"tooltip_link"},l.displayNameForKey(s.component),r.a.createElement("span",{className:"tooltiptext_link"},s.component)))),r.a.createElement("p",null,r.a.createElement("span",null,"Type: "),h,E&&r.a.createElement("span",{className:"unselectable"}," | \xa0",r.a.createElement(x.b,{className:"soft-link",to:v.GraphNode(a,E)},E))),s.scope&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Scope: "),r.a.createElement(x.b,{className:"soft-link",to:v.GraphScope(a,s.scope)},"@",g)),s.module&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Module: "),u?r.a.createElement(x.b,{className:"soft-link",to:v.GraphModule(a,s.module)},r.a.createElement("div",{className:"tooltip_link"},l.displayNameForKey(u),r.a.createElement("span",{className:"tooltiptext_link"},u))):r.a.createElement("span",null,"n/a")),"COMPONENT_PROVISION"==s.kind&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Provided by: "),N),r.a.createElement("br",null),c&&r.a.createElement("div",null,r.a.createElement("h6",null,"Dependencies \xa0|\xa0",r.a.createElement(x.b,{className:"soft-link",to:v.GraphClosure(a,s.key)},"Transitive"),"\xa0|\xa0",r.a.createElement(x.b,{className:"soft-link",to:v.Tree(a,s.key)},"Tree")),s&&s.dependencies.map((function(e){return{node:n.getNode(a,e.key),dep:e}})).filter((function(e){return void 0!==e.node})).map((function(e){var n=e.node,o=e.dep;return r.a.createElement(W,{key:n.key,weight:t.getWeight(a,n.key),kind:o.kind,scoped:!0,node:n,onSelect:function(e){return i.push(v.GraphNode(a,e))}})})),!s||0===s.dependencies.length&&r.a.createElement("div",null,"None"),r.a.createElement("br",null),r.a.createElement("h6",null,"Callsites"),d.map((function(e){return r.a.createElement(W,{key:e.key,node:e,kind:e.kind,scoped:!0,onSelect:function(e){return i.push(v.GraphNode(a,e))}})})),0===d.length&&r.a.createElement("div",null,"None"))))}function X(e){var n=e.graphManager,t=e.weightService,a=e.componentName,o=e.scope,c=n.getScope(a,o),i=Object(p.f)();return c?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Scope",r.a.createElement("br",null),c.scope),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h6",null,"Bindings (",c.bindings.length,")"),c.bindings.map((function(e){return r.a.createElement(W,{key:e.key,weight:t.getWeight("",e.key),scoped:!0,node:e,onSelect:function(e){i.push("/".concat(a,"/node/").concat(e))}})})))))):r.a.createElement("div",null,"Cannot find $",c," module in $",a," graph")}function ee(e){var n=e.graphManager,t=e.componentName,a=e.nodeName,o=function(e,n,t){var a={},r=[t],o={},c={},i={};e.getComponent(n).nodes.forEach((function(e){var n=e.module;n&&(i[n]=(i[n]||0)+1)}));for(;0!=r.length;){var l=r.shift();if(l&&!a[l]){a[l]=!0;var s=e.getNode(n,l);if(s){if(s.module)(c[s.module]||(c[s.module]=[])).push(s);else(o[s.scope||"@"]||(o[s.scope||"@"]=[])).push(s);s.dependencies.forEach((function(e){r.push(e.key)}))}}}return{bindings:o,modules:c,moduleSummary:i}}(n,t,a),c=Object.keys(o.bindings).filter((function(e){return"@"!=e&&"@dagger.Reusable"!=e})),i=Object.keys(o.modules),l=Object(p.f)();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Transitive Dependencies: ",a),c.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,"Scoped Bindings"),c.map((function(e){return r.a.createElement("div",null,r.a.createElement("p",null,function(e){var n=e.lastIndexOf(".");if(-1===n)return e;return"@"+e.substring(n+1)}(e)),o.bindings[e].map((function(e){return r.a.createElement("div",null,e.key)})))}))),i.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,"Module Bindings"),i.map((function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(x.b,{className:"soft-link",to:v.GraphModule(t,e)},function(e){var n=e.split(".");if(0==n.length)return e;var t=0;for(;t<n.length&&n[t][0]!==n[t][0].toUpperCase();)t++;if(t<n.length)return n.slice(t,n.length).join(".");return e}(e)),"\xa0 (",o.modules[e].length,"/",o.moduleSummary[e],")"),o.modules[e].map((function(e){return r.a.createElement(W,{key:e.key,node:e,kind:e.kind,scoped:!0,onSelect:function(n){return l.push(v.GraphNode(t,e.key))}})})))})))))}var ne=function(e){var n=e.graphManager,t=e.subcomponentName,a=e.componentName,o=e.weightService,c=n.getSubcomponentBindings(a,t),i=Object(p.f)();return c.sort((function(e,n){var t=o.getWeight(a,e.key),r=o.getWeight(a,n.key);return(r?r.value:0)-(t?t.value:0)})),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},t),r.a.createElement("div",null,c.length," total bindings."),r.a.createElement("div",null,c.map((function(e){return r.a.createElement(W,{key:e.key,weight:o.getWeight(a,e.key),kind:e.kind,scoped:!0,node:e,onSelect:function(n){return i.push(v.GraphNode(a,e.key))}})})))))},te=function(e){Object(d.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(u.a)(this,t),(a=n.call(this,e)).metricOptions=void 0,a.metricOptions=a.props.weightServiceManager.getWeightServiceNames().map((function(e){return{label:e.charAt(0).toUpperCase()+e.slice(1),value:e}})),a.state=a.metricOptions[0],a}return Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement($.a,{className:"component-select weight-select",classNamePrefix:"react-select",value:this.metricOptions[0],onChange:function(n){var t=n;e.setState(t),e.props.onSelectWeight(t.value)},options:this.metricOptions})}}]),t}(r.a.Component),ae=(t(151),t(27));function re(e){var n=e.graphManager,t=e.componentName,a=e.nodeName,o=e.weightService,c=function(e,n,t){var a={},r=[t],o=new Map;for(;0!=r.length;){var c=r.shift();if(c&&!a[c]){a[c]=!0;var i=e.getNode(n,c);i&&function(){var e=[];i.dependencies.forEach((function(n){a[n.key]||(e.push(n.key),r.push(n.key))})),o.set(c,e)}()}}return{mapOfNodes:o}}(n,t,a),i=Object(p.f)(),l=new I,s=c.mapOfNodes;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Tree for: ",l.displayNameForKey(a)),r.a.createElement("div",{className:"card-title"},"Component: ",t.substr(t.lastIndexOf(".")+1)),r.a.createElement(ae.d,null,r.a.createElement(ae.c,null,r.a.createElement(ae.j,{className:"w-200"},r.a.createElement("span",{onClick:function(){return i.push(v.GraphNode(t,a))}},l.displayNameForKey(a)),r.a.createElement(ae.k,{icon:"none",opened:!0,far:!0,tag:"span"},function e(n,t,a,o,c){var i,l=new I,s=Object(p.f)(),u=o.getNode(a,t),m=new Map;return u&&u.dependencies.length>0&&u.dependencies.map((function(e){m.set(e.key,e.kind)})),r.a.createElement("div",null,null===(i=n.get(t))||void 0===i?void 0:i.map((function(t){var i,u=!1;m.get(t)&&"INSTANCE"==m.get(t)&&(u=!0);var d=c.getWeight(a,t);return 0!=(null===(i=n.get(t))||void 0===i?void 0:i.length)?r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(C,{kind:m.get(t)}),r.a.createElement("span",{onClick:function(){return s.push(v.GraphNode(a,t))}},l.displayNameForKey(t)),r.a.createElement(w,{weight:d}),r.a.createElement(ae.k,{icon:"none",opened:u,fal:!0,tag:"span"},e(n,t,a,o,c))):r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(C,{kind:m.get(t)}),r.a.createElement("span",{onClick:function(){return s.push(v.GraphNode(a,t))}},l.displayNameForKey(t)),r.a.createElement(w,{weight:d}))})))}(s,a,t,n,o)))))))}var oe=function(e){var n=e.graphManager,t=e.weightServiceManager,o=e.componentName,c=Object(a.useMemo)((function(){return o&&n.getComponent(o)}),[n,o]),i=Object(p.f)(),l=t.getWeightService(),s=t.getWeightServiceNames().length>1;return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row search-bar"},r.a.createElement("div",{className:S()("col",s?"s9":"s12")},r.a.createElement(F,{graphManager:n,weightService:l,componentName:c&&c.name,onSelect:function(e,n){return i.push(v.GraphNode(e||"",n))}})),s&&r.a.createElement("div",{className:"col s3"},r.a.createElement(te,{weightServiceManager:t,onSelectWeight:function(e){t.selectWeightService(e),i.replace("#")}}))),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:f.Module,render:function(e){return r.a.createElement(H,{graphManager:n,weightService:l,moduleName:decodeURIComponent(e.match.params.module),componentName:o})}}),r.a.createElement(p.a,{path:f.GraphModule,render:function(e){return r.a.createElement(H,{graphManager:n,weightService:l,moduleName:decodeURIComponent(e.match.params.module),componentName:o})}}),r.a.createElement(p.a,{path:f.GraphScope,render:function(e){return r.a.createElement(X,{graphManager:n,weightService:l,scope:decodeURIComponent(e.match.params.scope),componentName:o})}}),r.a.createElement(p.a,{path:f.GraphClosure,render:function(e){return r.a.createElement(ee,{graphManager:n,nodeName:decodeURIComponent(e.match.params.key),componentName:o})}}),r.a.createElement(p.a,{path:f.Tree,render:function(e){return r.a.createElement(re,{graphManager:n,nodeName:decodeURIComponent(e.match.params.key),componentName:o,weightService:l})}}),r.a.createElement(p.a,{path:f.SearchNode,render:function(e){return r.a.createElement(Y,{graphManager:n,weightService:l,nodeName:decodeURIComponent(e.match.params.nodeName)})}}),r.a.createElement(p.a,{path:f.GraphNode,render:function(e){return r.a.createElement(Q,{graphManager:n,weightService:l,nodeName:decodeURIComponent(e.match.params.node),componentName:o,fullDetails:!0})}}),r.a.createElement(p.a,{path:f.SubComponent,render:function(e){return r.a.createElement(ne,{graphManager:n,subcomponentName:decodeURIComponent(e.match.params.subcomponent),componentName:o,weightService:l})}}),r.a.createElement(p.a,{path:f.Component,render:function(e){return r.a.createElement(P,{componentName:decodeURIComponent(e.match.params.component),graphManager:n,weightService:l,onSelect:function(e,n){return i.push(v.GraphNode(e||"",n))}})}}),r.a.createElement(p.a,{path:"",render:function(e){return r.a.createElement(A,{graphManager:n,weightServiceManager:t})}}))))},ce=t(91),ie=t.n(ce),le=function(){return r.a.createElement("div",{className:"graph-spinner"},r.a.createElement(ie.a,{size:30,spinnerColor:"#ee6e73",spinnerWidth:3,visible:!0,radius:"",color:"",stroke:""}))},se=t(25);function ue(e){var n=e.trigger,t=e.onChangeManifestUrl,o=Object(a.useRef)(null);return r.a.createElement(se.Modal,{actions:[r.a.createElement(se.Button,{flat:!0,modal:"close",node:"button",waves:"green"},"Close"),r.a.createElement(se.Button,{modal:"close",className:"waves-effect waves-light red lighten-2",node:"button",onClick:function(){t(o.current.value)}},"Load")],bottomSheet:!1,fixedFooter:!1,header:"Load manifest from URL",id:"modal-0",options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:n},r.a.createElement("form",{className:""},r.a.createElement("input",{ref:o,type:"text",className:"textbox",placeholder:"Enter manifest URL",onKeyDown:function(e){13===e.keyCode&&t(o.current.value)}})))}var me=function(e){var n=e.loaded,t=e.onChangeManifestUrl;return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},n?r.a.createElement("div",{className:"row search-bar"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Welcome to Dagger Browser"),"Dagger Browser is a simple tool for easily navigating a project's Dagger graph. The graph data is generated by a Dagger SPI plugin and supplied via a JSON manifest file.",r.a.createElement("div",{className:"center-align"},r.a.createElement(ue,{onChangeManifestUrl:t,trigger:r.a.createElement("a",{className:"btn red lighten-2",href:"#"},"Load manifest from URL")})))))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement(le,null)))))},de=t(93),he=function(){function e(n){Object(u.a)(this,e),this.nodeWeights=void 0,this.graphManager=void 0,this.graphManager=n,this.nodeWeights={}}return Object(m.a)(e,[{key:"getWeight",value:function(e,n){return n?(this.nodeWeights[e]||(this.nodeWeights[e]={}),this.nodeWeights[e][n]||(this.nodeWeights[e][n]=this.graphManager.computeNodeWeight(e,n,new pe)),this.nodeWeights[e][n]):{value:this.graphManager.getComponent(e).nodes.length,largeThreshold:500,smallThreshold:10}}}]),e}(),pe=function(){function e(){Object(u.a)(this,e),this.weight=void 0,this.weight={value:0,largeThreshold:500,smallThreshold:10}}return Object(m.a)(e,[{key:"reduce",value:function(e){this.weight.value++}},{key:"result",value:function(){return this.weight}}]),e}(),fe=function(){function e(n){Object(u.a)(this,e),this.classInfo=void 0,this.classInfo=n}return Object(m.a)(e,[{key:"getSummary",value:function(){var e=this.classInfo.code_size,n="B";return e>=1024&&(e=Math.round(e/1024),n="kB"),"dex size: ".concat(e," ").concat(n)+"\nmethods: ".concat(this.classInfo.method_count)+(this.classInfo.lambda_count?"\nlambdas: ".concat(this.classInfo.lambda_count):"")+"\nfields: ".concat(this.classInfo.field_count)+(this.classInfo.inner_class_count?"\ninner classes: ".concat(this.classInfo.inner_class_count):"")}},{key:"getMemorySize",value:function(){return this.classInfo.code_size+60*this.classInfo.method_count+30*this.classInfo.field_count}},{key:"add",value:function(e){if(this.classInfo.method_count+=e.classInfo.method_count,e.classInfo.lambda_count){var n=this.classInfo.lambda_count||0;this.classInfo.lambda_count=n+e.classInfo.lambda_count}if(this.classInfo.field_count+=e.classInfo.field_count,this.classInfo.code_size+=e.classInfo.code_size,e.classInfo.inner_class_count){var t=this.classInfo.inner_class_count||0;this.classInfo.inner_class_count=t+e.classInfo.inner_class_count}}}]),e}(),ge=function(){function e(n){Object(u.a)(this,e),this.classInfo=void 0,this.classInfo=n}return Object(m.a)(e,[{key:"getWeight",value:function(e,n){var t=this.getClassSize(n||e);if(t){var a=t.getMemorySize()/1024;return a>1&&(a=Math.round(a)),{value:a,largeThreshold:20,smallThreshold:3,summary:t.getSummary(),unit:"kB"}}}},{key:"getClassSize",value:function(e){var n=this.classInfo[e];if(n)return new fe(n)}}]),e}(),ve=function(){function e(n,t){Object(u.a)(this,e),this.nodeWeights=void 0,this.graphManager=void 0,this.classSizeService=void 0,this.graphManager=n,this.classSizeService=t,this.nodeWeights={}}return Object(m.a)(e,[{key:"getWeight",value:function(e,n){if(this.nodeWeights[e]||(this.nodeWeights[e]={}),n){if(!this.nodeWeights[e][n]){var t=new Ee(this.classSizeService,n);this.nodeWeights[e][n]=this.graphManager.computeNodeWeight(e,n,t)}return this.nodeWeights[e][n]}if(!this.nodeWeights[e][e]){var a=Object.assign([],this.graphManager.getComponent(e).nodes),r=new Ee(this.classSizeService,e);this.nodeWeights[e][e]=this.graphManager.computeWeightForNodes(e,a,r)}return this.nodeWeights[e][e]}}]),e}(),Ee=function(){function e(n,t){Object(u.a)(this,e),this.classSize=void 0,this.classSizeService=void 0,this.reduced=void 0,this.classSizeService=n,this.reduced=new Set;this.classSize=new fe({field_count:0,method_count:0,lambda_count:0,code_size:0,inner_class_count:0});var a=this.classSizeService.getClassSize(t);a&&this.classSize.add(a)}return Object(m.a)(e,[{key:"reduce",value:function(e){if(!this.reduced.has(e)){this.reduced.add(e);var n=this.classSizeService.getClassSize(e);n&&this.classSize.add(n)}}},{key:"result",value:function(){return{value:Math.round(this.classSize.getMemorySize()/1024),largeThreshold:1e3,smallThreshold:50,summary:this.classSize.getSummary(),unit:"kB"}}}]),e}(),Ne=function(){function e(n){if(Object(u.a)(this,e),this.weightServices=void 0,this.weightService=void 0,this.weightServices={},this.weightService=this.weightServices.bindings=new he(n),n.classInfo&&Object.keys(n.classInfo).length){var t=new ge(n.classInfo);this.weightServices["class memory"]=t,this.weightServices["graph memory"]=new ve(n,t)}}return Object(m.a)(e,[{key:"getWeightServiceNames",value:function(){return Object.keys(this.weightServices).sort()}},{key:"getWeightService",value:function(){return this.weightService}},{key:"selectWeightService",value:function(e){this.weightService=this.weightServices[e]}}]),e}();function ke(e){var n=e.manifestUrl,t=e.onChangeManifestUrl;return r.a.createElement("nav",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(x.b,{to:v.Home,className:"brand-logo"},k.TITLE),n&&r.a.createElement("div",{className:"right hide-on-med-and-down"},r.a.createElement(se.Dropdown,{options:{alignment:"right",autoTrigger:!0,closeOnClick:!0,constrainWidth:!1,container:null,coverTrigger:!1,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250},trigger:r.a.createElement("a",{href:"#!",className:"settings-icon"},r.a.createElement(se.Icon,{right:!0},"settings"))},r.a.createElement(ue,{onChangeManifestUrl:t,trigger:r.a.createElement("a",{href:"#",className:"manifest-model"},"Load manifest from URL")}),r.a.createElement("a",{href:n,target:"_blank",className:"manifest-model",title:"Download JSON"},"Download manifest"))))))}var ye=t(94),be=function(e){e.manifestUrl;var n=e.onFilesSelected,t=e.children,o=Object(a.useCallback)(n,[]),c=Object(ye.a)({onDrop:o}),i=c.getRootProps,l=(c.getInputProps,c.isDragActive);return r.a.createElement("div",i(),l?r.a.createElement("div",null,t,r.a.createElement("div",{className:"full-screen-alert"},r.a.createElement("p",null,"Drop to load manifest..."))):t)},Se=function(e){Object(d.a)(t,e);var n=Object(h.a)(t);function t(e){var a;return Object(u.a)(this,t),(a=n.call(this,e)).graphManager=new V,a.state={manifestUrl:k.COMPONENTS_MANIFEST_JSON_URL,loadedManifest:!1},a}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=Object(s.a)(l.a.mark((function e(){var n,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.loadedManifest){e.next=13;break}if(!this.state.manifestFile){e.next=8;break}return e.next=4,this.graphManager.loadFile(this.state.manifestFile);case 4:n=e.sent,this.setState({weightServiceManager:n?new Ne(this.graphManager):void 0,loadedManifest:!0}),e.next=13;break;case 8:if(!this.state.manifestUrl){e.next=13;break}return e.next=11,this.graphManager.loadUrl(this.state.manifestUrl);case 11:t=e.sent,this.setState({weightServiceManager:t?new Ne(this.graphManager):void 0,loadedManifest:!0});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeManifestUrl",value:function(e){this.setState({manifestUrl:e,loadedManifest:!1})}},{key:"onChangeManifestFile",value:function(e){if(1===e.length){var n=e[0];"application/json"==n.type?this.setState({manifestFile:n,loadedManifest:!1}):alert("Manifest must be a json file")}else alert("Upload a single ComponentsManifest.json")}},{key:"render",value:function(){var e=this;return r.a.createElement(x.a,null,r.a.createElement(de.a,{ReactRouterRoute:p.a},r.a.createElement(p.a,{path:f.Home,render:function(n){return r.a.createElement(be,{onFilesSelected:function(n){return e.onChangeManifestFile(n)}},r.a.createElement("div",null,r.a.createElement(ke,{manifestUrl:e.graphManager.manifestUrl,onChangeManifestUrl:function(n){return e.onChangeManifestUrl(n)}}),e.state.weightServiceManager?r.a.createElement(oe,{componentName:n.match.params.component?decodeURIComponent(n.match.params.component):"",graphManager:e.graphManager,weightServiceManager:e.state.weightServiceManager}):r.a.createElement(me,{loaded:e.state.loadedManifest,onChangeManifestUrl:function(n){return e.onChangeManifestUrl(n)}})))}})))}}]),t}(r.a.Component);t(214),t(215),t(216);c.a.render(r.a.createElement(Se,null),document.getElementById("root"))},33:function(e,n,t){e.exports=t.p+"static/media/link.757c2f47.png"},54:function(e){e.exports=JSON.parse('{"title":"Dagger Browser","repo_url":""}')},59:function(e,n,t){},95:function(e,n,t){e.exports=t(217)}},[[95,1,2]]]);
//# sourceMappingURL=main.25eddd2f.chunk.js.map